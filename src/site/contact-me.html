---
layout: layouts/base.html
title: Contact - Art By Skylee
page_title: Contact | Art By Skylee
---

<div id="contact-section" class="section">
  <div class="content container">
    <h2 class="focus-title">{{contact.header}}</h2>

    <p>
      {{contact.contactMessage}}
    </p>
    <div id="form-anchor">

    </div>
    <!-- ============ Contact Form - START ============ -->

    <!-- Yeah the form is wrong but it's not my code and I don't feel like changing it. -->
    <form id="contact-form">
      <div class="col-md-6">
        <label><strong>Name *</strong>
          <input class="required" type="text" name="name" id="name" placeholder="Your Name" />
        </label>
        <label><strong>Email *</strong>
          <input class="required" type="text" name="email" id="email" placeholder="Your Email" />
        </label>
        <label><strong>Subject</strong>
          <select name="subject" id="subject">

            <div class="row">
              {% for option in contact.subjects %}
              <option value="{{option.subject}}">{{option.subject}}</option>
              {% endfor %}
          </select>
        </label>
      </div>
      <div class="col-md-6">
        <label><strong>Message *</strong>
          <textarea class="required" name="message" id="message" placeholder="Your wonderful message!"></textarea>
        </label>
        <p>( <strong>*</strong> ) = Mandatory field</p>
        <input class="submit btn md" type="submit" name="submit" value="Send Message" />
      </div>
      <input type="hidden" name="form_type" value="contact" />
    </form>

    <!-- ============ Contact Form - END ============ -->
  </div>
</div>

<!-- <div class="email-confirmation visible">
  <p>Email Sent!</p>
  <span class="close-button">X</span>
</div> -->

<script src="https://smtpjs.com/v3/smtp.js">
</script>

<script>
  // Writing this *like* it was a react component is 10000 times easier
  let state = {
    nameValid: false,
    emailValid: false,
    messageValid: false,
    name: "",
    email: "",
    message: "",
    nameInput: null,
    emailInput: null,
    messageInput: null,
  }

  // const sentConfirmation = () =>{
  //   const emailConfirmation = document.getElementsByClassName("email-confirmation");
  //   emailConfirmation.classList.remove("hidden");
  //   emailConfirmation.classList.remove("visible")
  // }


  function insertAfter(newNode, referenceNode) {
    referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
  }

  function removeNextSibling(e) {
    if (e && e.nextSibling) {
      e.parentNode.removeChild(e.nextSibling)
    }
  }

  const errorMessage = (name) => {
    let span = document.createElement("span")
    span.innerText = `${name} is required.`
    span.style.color = "red";
    return span
  }

  function validateEmail(email) {
    const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(String(email).toLowerCase());
  }

  function requiresInput(input) {
    return input !== "";
  }

  const submitForm = e => {
    e.preventDefault()

    if (state.messageValid && state.nameValid && state.emailValid) {
      Email.send({
        SecureToken: "3f3c8267-1b04-400a-b2f6-2df69b31972a",
        To: 'perkins.skylee@gmail.com',
        From: `${state.email}`,
        Subject: `${state.name} ${subject}`,
        Body: `${state.message}`
      }).then(
        //email sent
        message => {
          const inputArr = [nameInput,
            emailInput,
            messageInput] = state;
          inputArr.forEach(input=>{
            input.value = "";
            input.style.border = "none";
            })
        }
      );
    }
  }


  const greaterThan = (input, min = 2) => input.length >= min

  const inputHandler = (e, validators = []) => {
    state[e.target.name] = e.target.value;

    state[`${e.target.name}Valid`] = validators.every(validator => validator(e.target.value));
    if (state[`${e.target.name}Valid`] === false) {
      e.target.style.border = "2px solid red"
      // console.log(e.target.nextSibling)
      if (!e.target.nextSibling || e.target.nextSibling.nodeType === 3)
        insertAfter(errorMessage(e.target.name), e.target)
    } else {
      e.target.style.border = "none"
      removeNextSibling(e.target)
    }
    console.log(state)
  }


  state.nameInput = document.getElementById("name")
  const nameHandler = (e) => inputHandler(e, [requiresInput, greaterThan])
  // nameInput.oninput = handleNameInput
  state.nameInput.oninput = nameHandler

  const emailHandler = e => inputHandler(e, [requiresInput, validateEmail])
  state.emailInput = document.getElementById("email")
  state.emailInput.oninput = emailHandler

  const messageMin = string => greaterThan(string, 10)
  const messageHandler = e => inputHandler(e, [requiresInput, messageMin])
  state.messageInput = document.getElementById("message")
  state.messageInput.oninput = messageHandler

  const contactForm = document.getElementById("contact-form")
  contactForm.onsubmit = submitForm


</script>